!function(){function s(s){var e=$("#wrap-list-result");s?v.width()>=1024&&(e.hasClass("ps-container")||(e.perfectScrollbar({suppressScrollX:!0}),e.on("ps-y-reach-end",function(){e.hasClass("loading-more")||(e.addClass("loading-more"),console.log("ahora cargaré más ITEMS"))}))):e.hasClass("ps-container")&&e.perfectScrollbar("destroy")}function e(s){if(s){if(!u.find("ul").length){var e=u.find("option:selected").val();u.find("option").each(function(){$(this).replaceWith('<li class="'+$(this).val()+'">'+$(this).text()+"</li>")});var i=u.find("select");i.replaceWith("<ul>"+i.html()+"</ul>"),u.find("."+e).addClass("active"),u.removeClass(e)}}else if(!u.find("select").length){var a=u.find(".active").index(),l=u.find(".active").attr("class").split(" ")[0];u.find("li").each(function(){$(this).replaceWith('<option value="'+$(this).attr("class").split(" ")[0]+'">'+$(this).text()+"</option>")});var t=u.find("ul");t.replaceWith("<select>"+t.html()+"</select>"),u.find("option").eq(a).prop("selected",!0).siblings().prop("selected",!1),u.addClass(l)}}function a(s){var e=s.find("> img"),i=e.attr("data-src");i!==undefined&&(e.attr("src",i).removeAttr("data-src"),s.addClass("loading"),e.on("load",function(){s.removeClass("loading")}))}function l(s){for(var e=s.length,i=0;i<e;i++)if(s.eq(i).hasClass("active"))return i}function t(s,e){var i=s.substring(s.length-2),a=[],l="";if(e<=0)a.push(dgtCredential.imgComingSoon);else for(var t=1;t<=e;t++)l="http://retsimages.s3.amazonaws.com/"+i+"/"+s+"_"+t+".jpg",a.push(l);return a}function r(s,e,i,a,l,t,r,d,c,v,p){$(s).slider({range:!0,min:e,max:i,values:[e,i],step:a,slide:function(e,i){i.values[0]>v?n(s,p):n(s,a),1==c?($(l).val(r+o(i.values[0])+" "+d),$(t).val(r+o(i.values[1])+" "+d)):($(l).val(r+i.values[0]+" "+d),$(t).val(r+i.values[1]+" "+d))}})}function n(s,e){$(s).slider({step:e})}function o(s){var e=new Array,i=",";s=s.toString(),s=s.replace(/\D/g,""),e=s.split("");for(var a=e.length-1,l=3,t=2,r="";a>t;)e.splice(a-t,0,i),t+=l;for(var n=0;n<=e.length-1;n++)r+=e[n];return r}function d(s,e,i){$(s).slider({min:e,max:i,animate:!0,range:!0,values:[e,i]})}var c=$("body"),v=$(window),p=$("html, body"),u=$("#filter-views");if(u.length){var f=$("#wrap-result");u.on("change","select",function(){switch($(this).find("option:selected").val()){case"grid":u.removeClass("list map").addClass("grid"),f.removeClass("view-list view-map").addClass("view-grid"),c.removeClass("view-list view-map");break;case"list":u.removeClass("grid map").addClass("list"),f.removeClass("view-grid view-map").addClass("view-list"),c.addClass("view-list").removeClass("view-map");break;case"map":u.removeClass("list grid").addClass("map"),f.removeClass("view-list view-grid").addClass("view-map"),c.removeClass("view-list").addClass("view-map")}}),u.on("click","li",function(){switch($(this).addClass("active").siblings().removeClass("active"),$(this).attr("class").split(" ")[0]){case"grid":f.removeClass("view-list view-map").addClass("view-grid"),c.removeClass("view-list view-map"),s(!1);break;case"list":f.removeClass("view-grid view-map").addClass("view-list"),c.addClass("view-list").removeClass("view-map"),s(!1);break;case"map":f.removeClass("view-list view-grid").addClass("view-map"),c.removeClass("view-list").addClass("view-map"),s(!0)}}),v.width()>=768&&e(!0),v.on("resize",function(){var s=v.width();s>=768?e(!0):s<768&&e(!1)})}var h=$("#result-search");if(h.length){h.on("click",".btn-check",function(){var s=$("#link-favorites > a"),e=s.find("span:eq(1)"),i=$(this).find("span");if(i.hasClass("active")){if(i.removeClass("active"),s.length){var e=$("#link-favorites a span:eq(1)"),a=Number(e.text())-1;e.text(a),0==a&&s.removeClass("active")}}else i.addClass("active"),s.length&&(0==Number(e.text())?(e.text("1"),s.addClass("active")):e.text(Number(e.text())+1))}),h.find(".propertie").each(function(){a($(this).find(".wrap-slider li:eq(0)"))}),h.on("click",".next",function(){var s=$(this).parent(),e=s.find("> ul");if(!e.hasClass("swiping")){var i=e.find("> li"),r=i.length;if("0px"==e.css("margin-left"))if(e.addClass("swiping"),e.hasClass("created")){e.css("margin-left","-100%");var n=i.eq(1);a(n),n.addClass("active"),e.removeClass("swiping")}else{e.css("margin-left","-100%"),s.addClass("loading");var o="";$.each(t(s.parent().attr("data-mls"),s.parent().attr("data-counter")),function(s,e){o=o+'<li><img src="#" data-src="'+e+'" title="#" alt="#"></li>'}),e.append(o);var d=e.find("> li"),c=d.length;setTimeout(function(){e.css("width",100*c+"%"),d.css("width",100/c+"%");var s=d.eq(1);s.addClass("active"),a(s)},500),setTimeout(function(){s.removeClass("loading")},1e3),e.addClass("created").removeClass("swiping")}else{var v=l(i);if(v+1!==r){e.addClass("swiping"),e.css("margin-left","-"+100*(v+1)+"%");var n=i.eq(v+1);a(n),n.addClass("active").siblings().removeClass("active"),e.removeClass("swiping")}else e.addClass("swiping"),e.css("margin-left","0"),i.eq(r-1).removeClass("active"),e.removeClass("swiping")}}}),h.on("click",".prev",function(){var s=$(this).parent().find("> ul");if(!s.hasClass("swiping")){var e=s.find("> li");e.length;if("0px"!=s.css("margin-left")){var i=l(e);s.addClass("swiping"),s.css("margin-left","-"+100*(i-1)+"%");e.eq(i-1).addClass("active").siblings().removeClass("active"),s.removeClass("swiping"),1==i&&e.eq(0).removeClass("active")}}});var m=null,C=null;h.on("touchstart",".propertie",function(s){m=s.touches[0].clientX,C=s.touches[0].clientY}),h.on("touchmove",".propertie",function(s){if(m&&C){var e=s.touches[0].clientX,i=s.touches[0].clientY,a=m-e,l=C-i;Math.abs(a)>Math.abs(l)&&(s.preventDefault(),a>0?$(this).find(".next").click():$(this).find(".prev").click()),m=null,C=null}})}var g=$("#mini-filters");g.length&&g.find("h4").on("click",function(){var s=$(this).parent().parent();s.hasClass("expanded")?s.removeClass("expanded"):(s.addClass("expanded"),s.siblings().removeClass("expanded")),s.hasClass("cities")&&!w.hasClass("ps-container")&&setTimeout(function(){w.perfectScrollbar({suppressScrollX:!0,minScrollbarLength:"42"})},1e3*Number(s.css("transition-duration").replace("s",""))*2)});var w=$("#cities-list");w.length&&v.on("resize",function(){w.hasClass("ps-container")&&w.perfectScrollbar("update")});var b=$("#filters");if(b.length){b.on("click","li",function(){var s=$("#all-filters"),e=$("#wrap-filters"),i=$(this).attr("class").split(" ")[0];switch(i){case"all":if($(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active").siblings().removeClass("active"),s.hasClass("visible")?s.hasClass("individual")&&s.hasClass("visible")?(s.removeClass("individual"),console.log("está visible e individual")):!s.hasClass("individual")&&s.hasClass("visible")&&(s.removeClass("visible"),console.log("no tiene individual, y si tiene visible")):(s.addClass("visible"),console.log('hacer visible el "all filter"')),v.width()<=640?(c.toggleClass("fixed"),s.css({top:e.outerHeight()+e.offset().top+"px",left:"0px",height:"calc(100vh - "+(e.outerHeight()+b.find("li.save").outerHeight())+"px)"})):v.width()>640&&v.width()<=768?(c.toggleClass("fixed"),s.css({left:"0px",top:e.offset().top+"px",height:"calc(100vh - "+(e.outerHeight()+x.outerHeight())+"px)"})):v.width()<=768?(console.log("me estoy ejecutando"),c.toggleClass("fixed")):s.css({left:"0px",top:e.outerHeight()+"px"}),v.width()<=768){var a=e.offset().top-Number(e.css("margin-top").replace("px",""));v.scrollTop()!==a&&p.animate({scrollTop:a},800)}s.hasClass("ps-container")||setTimeout(function(){s.perfectScrollbar({suppressScrollX:!0,minScrollbarLength:"42"})},1e3*Number(s.css("transition-duration").replace("s",""))*2);break;case"save":console.log("LI: Save Search");break;default:c.hasClass("fixed")&&c.removeClass("fixed"),s.hasClass("ps-container")&&s.perfectScrollbar("destroy");var l=g.find("li."+i);l.length?$(this).hasClass("active")?(s.removeClass("visible"),l.removeClass("visible"),$(this).removeClass("active"),setTimeout(function(){s.removeClass("individual")},1e3*Number(s.css("transition-duration").replace("s",""))*2)):($(this).addClass("active").siblings().removeClass("active"),l.addClass("visible").siblings().removeClass("visible"),s.hasClass("individual")||s.addClass("individual"),s.hasClass("visible")||s.addClass("visible"),s.css({top:e.outerHeight()+"px",left:$(this).offset().left+$(this).outerWidth()/2-150+"px",height:"auto"})):(console.log("El LI clickeado no está vinculado a la visualizacion de un mini filtro"),"save"==i&&console.log("guardaré la busqueda"))}});var x=$("#apply-filters");x.length&&x.on("click",function(){b.find(".all").trigger("click")})}r("#range-price",0,5e7,5e4,"#price_from","#price_to","$","",!0,1e6,25e4),r("#range-living",0,1e4,50,"#living_from","#living_to","","SF",!0),r("#range-year",1900,2021,1,"#year_from","#year_to","","",!1),d("#range-baths",0,8),d("#range-beds",0,13),function(s){var e={pips:function(e){options={first:"number",last:"number",rest:"pip"},s.extend(options,e),this.element.addClass("ui-slider-pips").find(".ui-slider-pip").remove();var a=this.options.max-this.options.min;for(i=0;i<=a;i++){var l=s('<span class="ui-slider-pip"><span class="ui-slider-line"></span><span class="ui-slider-number">'+i+"</span></span>");0==i?(l.addClass("ui-slider-pip-first"),"number"==options.first&&l.addClass("ui-slider-pip-number"),0==options.first&&l.addClass("ui-slider-pip-hide")):a==i?(l.addClass("ui-slider-pip-last"),"number"==options.last&&l.addClass("ui-slider-pip-number"),0==options.last&&l.addClass("ui-slider-pip-hide")):("number"==options.rest&&l.addClass("ui-slider-pip-number"),0==options.rest&&l.addClass("ui-slider-pip-hide")),"horizontal"==this.options.orientation?l.css({left:100/a*i+"%"}):l.css({top:100/a*i+"%"}),this.element.append(l)}}};s.extend(!0,s.ui.slider.prototype,e)}(jQuery)}();